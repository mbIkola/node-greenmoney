<!DOCTYPE html>
<!-- saved from url=(0028)http://localhost:4000/echeck -->
<html lang="en" class="gr__localhost"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>eCheck</title>

    
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <link rel="stylesheet" href="./eCheck_files/style.css">

    <!-- Basic Styles -->
    <link rel="stylesheet" href="./eCheck_files/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    <link rel="stylesheet" href="./eCheck_files/font-awesome.min.css">

    <!-- GOOGLE FONT -->
    <link rel="stylesheet" href="./eCheck_files/css">

    <script src="./eCheck_files/jquery.min.js"></script>
    <script src="./eCheck_files/bootstrap.min.js"></script>
</head>


<body data-gr-c-s-loaded="true">


<style>
    .label-info {
        margin-left: 1rem;
    }
    .form-control-feedback {
        padding-left: 1.5rem;
        opacity: 0;
    }
    .has-error .form-control-feedback {
        opacity: 0;
    }

</style>
<div class="container-fluid">
    <h1>  ECheck (Form Title) </h1>
    <p>
        <em>
            Here should be some description about what this form is about and what happens next
        </em>
    </p>

    <div class="content-form">
    <form action="http://localhost:4000/echeck">
        <div class="form-row">
            <div class="form-group col-md-6">
                <label for="inputPassword4">Full Name</label><span class="label label-info">required</span>
                <input type="text" class="form-control" id="inputPassword4" placeholder="name" name="name" autocomplete="name" required="">
                <span class="glyphicon glyphicon-remove form-control-feedback"></span>
            </div>

            <div class="form-group col-md-6">
                <label for="inputEmail4">Email</label>
                <input type="email" class="form-control" id="inputEmail4" placeholder="Email" name="email" autocomplete="email">

            </div>
        </div>




        <div class="form-row">
            <div class="form-group col-md-3 has-success">
                <label for="inputEmail4">Phone (10 digits in format 999-9999-9999)</label>
                <input type="tel" class="form-control" id="inputEmail4" placeholder="999-999-9999." name="phone" autocomplete="phone" pattern="^[0-9]{3}-?[0-9]{3}-?[0-9]{4}$" required="">

            </div>

            <div class="form-group col-md-3">
                <label for="inputCity">City</label><span class="label label-info">required</span>
                <input type="text" class="form-control" id="inputCity" autocomplete="address-level2" required="" name="city">
                <span class="glyphicon glyphicon-remove form-control-feedback"></span>
            </div>

            <div class="form-group col-md-3">
                <label for="inputState">State</label><span class="label label-info">required</span>
                <select id="inputState" class="form-control" name="state" autocomplete="address-level1" required="">
                    <option selected="" value="">Choose...</option>
                    
                        <option value="AA">Armed Forces Americas (except Canada)</option>
                    
                        <option value="AE">Armed Forces Middle East</option>
                    
                        <option value="AK">Alaska</option>
                    
                        <option value="AL">Alabama</option>
                    
                        <option value="AP">Armed Forces Pacific</option>
                    
                        <option value="AR">Arkansas</option>
                    
                        <option value="AS">American Samoa</option>
                    
                        <option value="AZ">Arizona</option>
                    
                        <option value="CA">California</option>
                    
                        <option value="CO">Colorado</option>
                    
                        <option value="CT">Connecticut</option>
                    
                        <option value="DC">District of Columbia</option>
                    
                        <option value="DE">Delaware</option>
                    
                        <option value="FL">Florida</option>
                    
                        <option value="FM">Federated States of Micronesia</option>
                    
                        <option value="GA">Georgia</option>
                    
                        <option value="GU">Guam</option>
                    
                        <option value="HI">Hawaii</option>
                    
                        <option value="IA">Iowa</option>
                    
                        <option value="ID">Idaho</option>
                    
                        <option value="IL">Illinois</option>
                    
                        <option value="IN">Indiana</option>
                    
                        <option value="KS">Kansas</option>
                    
                        <option value="KY">Kentucky</option>
                    
                        <option value="LA">Louisiana</option>
                    
                        <option value="MA">Massachusetts</option>
                    
                        <option value="MD">Maryland</option>
                    
                        <option value="ME">Maine</option>
                    
                        <option value="MH">Marshall Islands</option>
                    
                        <option value="MI">Michigan</option>
                    
                        <option value="MN">Minnesota</option>
                    
                        <option value="MO">Missouri</option>
                    
                        <option value="MP">Northern Mariana Islands</option>
                    
                        <option value="MS">Mississippi</option>
                    
                        <option value="MT">Montana</option>
                    
                        <option value="NC">North Carolina</option>
                    
                        <option value="ND">North Dakota</option>
                    
                        <option value="NE">Nebraska</option>
                    
                        <option value="NH">New Hampshire</option>
                    
                        <option value="NJ">New Jersey</option>
                    
                        <option value="NM">New Mexico</option>
                    
                        <option value="NV">Nevada</option>
                    
                        <option value="NY">New York</option>
                    
                        <option value="OH">Ohio</option>
                    
                        <option value="OK">Oklahoma</option>
                    
                        <option value="OR">Oregon</option>
                    
                        <option value="PA">Pennsylvania</option>
                    
                        <option value="PR">Puerto Rico</option>
                    
                        <option value="PW">Palau</option>
                    
                        <option value="RI">Rhode Island</option>
                    
                        <option value="SC">South Carolina</option>
                    
                        <option value="SD">South Dakota</option>
                    
                        <option value="TN">Tennessee</option>
                    
                        <option value="TX">Texas</option>
                    
                        <option value="UT">Utah</option>
                    
                        <option value="VA">Virginia</option>
                    
                        <option value="VI">Virgin Islands</option>
                    
                        <option value="VT">Vermont</option>
                    
                        <option value="WA">Washington</option>
                    
                        <option value="WI">Wisconsin</option>
                    
                        <option value="WV">West Virginia</option>
                    
                        <option value="WY">Wyoming</option>
                    


                </select>
                <span class="glyphicon glyphicon-remove form-control-feedback"></span>
            </div>
            <div class="form-group col-md-3">
                <label for="inputZip">Zip</label><span class="label label-info">required</span>
                <input type="text" class="form-control" id="inputZip" placeholder="99999-9999" autocomplete="postal-code" name="zip" required="" pattern="^[0-9]{5}(?:-[0-9]{4})?$">
                <span class="glyphicon glyphicon-remove form-control-feedback"></span>
            </div>
        </div>

        <div class="form-row ">
            <div class="form-group col-md-6">
                <label for="inputAddress">Address 1</label><span class="label label-info">required</span>
                <input type="text" class="form-control" id="inputAddress" placeholder="1234 Main St" required="" name="address1" autocomplete="address-line1">
                <span class="glyphicon glyphicon-remove form-control-feedback"></span>
            </div>
            <div class="form-group col-md-6">
                <label for="inputAddress2">Address 2</label>
                <input type="text" class="form-control" id="inputAddress2" placeholder="Apartment, studio, or floor" name="address2" autocomplete="address-line2">
            </div>
        </div>

        <div class="form-row">
            <div class="form-group col-md-6">
                <label for="bankName"> Bank Name </label><span class="label label-info">required</span>
                <input type="text" class="form-control" id="bankName" name="bankName" autocomplete="off" required="">
                <span class="glyphicon glyphicon-remove form-control-feedback"></span>
            </div>
        </div>
        <div class="form-row">
            <div class="form-group col-md-6">
                <label for="accountNumber">
                    Account Number
                </label><span class="label label-info">required</span>
                <input class="form-control" type="text" id="accountNumber" name="accountNumber" autocomplete="off" placeholder="Account Number" required="">
                <span class="glyphicon glyphicon-remove form-control-feedback"></span>
            </div>
            <div class="form-group col-md-6">
                <label for="routingNumber">
                    Routing Number
                </label><span class="label label-info">required</span>
                <input class="form-control" type="text" id="routingNumber" name="routingNumber" autocomplete="off" placeholder="routing Number" required="">
                <span class="glyphicon glyphicon-remove form-control-feedback"></span>
            </div>
        </div>

        <div class="form-row">
            <div class="form-group col-md-6">
                <label for="checkAmount">
                    Check Amount
                </label><span class="label label-info">required</span>
                <input class="form-control" type="number" id="checkAmount" name="checkAmount" placeholder="Check Amount" required="" pattern="^[0-9]+$">
                <span class="glyphicon glyphicon-remove form-control-feedback"></span>
            </div>
            <div class="form-group col-md-6">
                <button type="submit" disabled="" class="btn btn-primary submit">Submit</button>
            </div>
        </div>



    </form></div>

    <div class="jumbotron hidden">
        <h1> Thank you!</h1>
        <p>This is some text explaining what just happens and what should be done next. </p>
        <p><a class="btn btn-primary btn-lg" href="http://localhost:4000/echeck#" role="button">Learn more</a></p>
    </div>

    <script type="text/javascript">
        $(document).ready(function() {
            function post(data) {
                return fetch(window.location.pathname, {
                    headers: {'Accept': 'application/json', 'Content-Type' : 'application/json'},
                    method: 'POST',
                    credentials: 'include',
                    body: JSON.stringify(data )
                }).then(function(res) {
                    if ( res.status < 400) {
                        $('.content-form').addClass('hidden');
                        $('.jumbotron').removeClass('hidden');
                    } else {
                        console.error("Something wrong");
                        alert(res.statusText);
                    }

                });
            }


            function checkForm(mark_form_group ) {
                var has_errors = false;
                let errors = [];

                $('input[required], select').each( (index, elem) => {

                    let regexp = new RegExp($(elem).attr('pattern') || '.*');
                    let fg = $(elem).parents('.form-group:first');
                    if ( !$(elem).val() || ! regexp.test($(elem).val() ) ) {
                        has_errors = true;
                        fg.removeClass('has-success');
                        if (elem.dirty) fg.addClass('has-error');
                        errors.push($(elem).attr('name') + " is invalid ");
                    } else {
                        fg.addClass('has-success').removeClass('has-error');
                    }
                });
                if ( has_errors ) {
                    console.log(errors);
                }
                return !has_errors;
            }
            var checkTimeout = null;
            let enableSubmitButtonOnChange = () => {
                clearTimeout(checkTimeout);
                checkTimeout = setTimeout(function() {
                if ( checkForm(true) ) {
                    $('.btn.submit').prop('disabled', false);
                } else {
                    $('.btn.submit').prop('disabled', true);
                }
                }, 40);
            };

            $('input').on('keyup', enableSubmitButtonOnChange);
            $('select').on('change', enableSubmitButtonOnChange);
            $('input, select').on('focus', function() { this.dirty = true; } );


            $('form').on('submit', function(e) {
                e.preventDefault();

                if ( ! checkForm(true) ) {
                     console.error("Form Invalid:");
                    return false;
                }

                var formdata = {};
                $('input, select').each( function(index,elem) {
                    formdata[ $(elem).attr('name')] = $(elem).val();
                });
                console.log("About to submit: ", formdata);

                post(formdata).then( () => {

                }).catch(err => {
                    alert(err);
                });
                return false;
            });



        });

    </script>
</div>


</body></html>